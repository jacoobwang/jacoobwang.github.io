<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>WebAssembly（Wasm）：前端性能提升的关键技术 | Jacoob</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://jacoobwang.github.io/favicon.ico?v=1760165813988">
<link rel="stylesheet" href="https://jacoobwang.github.io/styles/main.css">



<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://unpkg.com/vue@2.7.16/dist/vue.js"></script>



    <meta name="description" content="想象一下你正在构建一个高性能的 Web 应用程序，比如一个 3D 游戏、一个图像编辑器或者一个数据处理仪表盘。你需要应用程序快速流畅，在不减速的情况下执行各种复杂操作。但是仅靠 JavaScript 能做到的有限：无论你如何优化，总会有 J..." />
    <meta name="keywords" content="" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://jacoobwang.github.io">
        <img src="https://jacoobwang.github.io/images/avatar.png?v=1760165813988" class="site-logo">
        <h1 class="site-title">Jacoob</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            关于
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      温故而知新
    </div>
    <div class="site-footer">
      友情链接：<a href="https://faketextmeassage.com/">Fake Text Message</a> | <a class="rss" href="https://jacoobwang.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">WebAssembly（Wasm）：前端性能提升的关键技术</h2>
            <div class="post-date">2024-11-10</div>
            
            <div class="post-content" v-pre>
              <p>想象一下你正在构建一个高性能的 Web 应用程序，比如一个 3D 游戏、一个图像编辑器或者一个数据处理仪表盘。你需要应用程序快速流畅，在不减速的情况下执行各种复杂操作。但是仅靠 JavaScript 能做到的有限：无论你如何优化，总会有 JavaScript 无法快速运行的代码。</p>
<p>WebAssembly（Wasm）—— 有了这项酷炫的技术，现在我们可以在浏览器中运行高性能代码，几乎就像在原生应用程序中一样。</p>
<h2 id="webassembly-究竟是什么">WebAssembly 究竟是什么</h2>
<p>WebAssembly 或 Wasm 到底是什么呢？它基本上是 JavaScript 的超级伙伴。WebAssembly 是一种低级二进制格式，可以在浏览器中以接近原生的速度运行。它是为计算密集型任务而构建的，而这些任务 JavaScript 自己处理起来效果不太好。</p>
<p>最棒的是，WebAssembly 与特定编程语言无关。它是一个与语言无关的平台，像 C、C++ 或 Rust 等语言的代码可以直接在浏览器中运行。开发者终于可以将其他语言的高性能代码编译成 WebAssembly，在 Web 上与 JavaScript 一起使用。</p>
<h2 id="webassembly-特性">WebAssembly 特性</h2>
<p><strong>极速性能</strong><br>
Wasm 代码的运行速度几乎与原生应用程序一样快，所以你可以将它用于性能密集型任务。如果你正在构建一个图像编辑器，Wasm 可以轻松处理实时图像处理，如调整大小、颜色调整或应用滤镜，而让 JavaScript 处理用户界面。</p>
<p><strong>跨浏览器一致</strong><br>
所有主流浏览器都支持 WebAssembly，即 Chrome、Firefox、Safari 和 Edge。这意味着无论你的用户在哪里，Wasm 代码的运行方式都相似。所以，我们可以保证应用程序的性能始终一致且快速。</p>
<p><strong>更多语言选择</strong><br>
有了 WebAssembly，你不限于使用 JavaScript。你可以引入其他语言，如 C++ 或 Rust，它们以性能和内存效率著称。这对于速度至关重要的项目，或者当你想重用现有代码库时非常有用。</p>
<p><strong>优化资源使用</strong><br>
WebAssembly 被开发为低内存占用。这使得它适合资源有限的设备，如移动设备。这一点非常重要，因为现代应用程序需要在各种设备上运行。</p>
<h2 id="何时应该使用-webassembly">何时应该使用 WebAssembly</h2>
<p>并非每个 Web 项目都需要 WebAssembly。对于许多事情，JavaScript 仍然完全够用：表单验证、基本交互、DOM 操作…… 但如果你需要更快的速度，或者你正在处理特别大量的数据，以下是 Wasm 可能派上用场的时候：</p>
<ul>
<li><strong>图形密集型应用程序</strong>：需要 3D 渲染的应用程序，如基于 Web 的游戏或模拟等</li>
<li><strong>实时数据处理</strong>：需要快速计算的应用程序，如金融 / 科学分析工具等</li>
<li><strong>Web 上的遗留代码</strong>：如果你有现有的用 C++ 或 Rust 编写的代码，WebAssembly 允许你将其带到 Web 上而无需完全重写。</li>
</ul>
<h3 id="举个栗子">举个栗子</h3>
<p>我所在的团队就开发了一款类似于 figma 的图形编辑软件，其底层的渲染引擎则是由 c++ 实现，然后通过编译成 WebAssembly 后提供给 js 层调用，从而保障丝滑的操作体验。</p>
<h2 id="开发一个-webassembly-应用">开发一个 WebAssembly 应用</h2>
<p>让我们通过一个简单的例子来看看 WebAssembly 如何与 JavaScript 交互。我们将用 C 编写一个计算斐波那契数列的函数（当数字较大时，这是一项计算密集型任务），然后从 JavaScript 中调用它。</p>
<h3 id="步骤一-用-c-编写函数">步骤一、用 C 编写函数</h3>
<pre><code class="language-c">#include &lt;stdint.h&gt;

uint32_t fibonacci(uint32_t n) {
    if (n &lt;= 1) return n;
    return fibonacci(n - 1) + fibonacci(n - 2)
}
</code></pre>
<h3 id="步骤二-编译">步骤二、编译</h3>
<p>要将 C 编译为 WebAssembly，你需要 Emscripten，这是一个将 C/C++ 代码转换为 Wasm 的工具。安装 Emscripten 后，使用以下命令：</p>
<pre><code class="language-c">emcc fibonacci.c -s WASM=1 -o fibonacci.js
</code></pre>
<p>此命令将生成两个文件：</p>
<ul>
<li>fibonacci.wasm：WebAssembly 二进制文件</li>
<li>fibonacci.js：一个用于加载 WebAssembly 模块的 JavaScript 文件</li>
</ul>
<h3 id="步骤三-在-javascript-中使用-webassembly">步骤三、在 JavaScript 中使用 WebAssembly</h3>
<p>创建一个 HTML 文件来加载并运行 WebAssembly 代码：</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;

&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;title&gt;WebAssemblyDemo&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
  &lt;h1&gt;Fibonacci Sequence with webAssembly&lt;/h1&gt;
  &lt;button onclick=&quot;calculateFibonacci()&quot;&gt;Calculate Fibonacci&lt;/button&gt;
  &lt;p id=&quot;result&quot;&gt;&lt;/p&gt;
  &lt;script src=&quot;fibonacci.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;
</code></pre>
<p>当你在浏览器中打开这个文件并点击按钮时，WebAssembly 将高效地计算斐波那契数列，而不会给 JavaScript 带来压力。</p>
<h2 id="webassembly-和-javascript完美搭档">WebAssembly 和 JavaScript：完美搭档</h2>
<p>WebAssembly 被设计为 JavaScript 的补充，而不是替代品。它们协同工作效果最佳：Wasm 进行繁重的计算工作，JavaScript 处理用户界面逻辑和浏览器交互。</p>
<p>例如场景：<strong>数据可视化</strong><br>
想象你正在构建一个数据可视化应用程序，需要处理非常大的数据集。WebAssembly 可以处理数据处理和代码中其他对性能敏感的计算部分，而 JavaScript 仍然可以用于渲染图表等事情，在性能和交互性之间提供良好的平衡。</p>
<h2 id="展望">展望</h2>
<p>通过在浏览器中实现接近原生的性能，我们终于可以构建那些以前仅限于原生桌面平台的雄心勃勃的应用程序和体验。</p>
<p>对于前端开发者来说，WebAssembly 提供了一个机会，可以开始处理比仅使用 JavaScript 性能更好的应用程序。</p>

            </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://jacoobwang.github.io/post/uselayouteffect-yu-useeffectreact-hooks-li-jie/">
                  <h3 class="post-title">
                    useLayoutEffect与useEffect：React Hooks 理解
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>






  </body>
</html>
